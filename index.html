<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Mi Fresado</title>
    <link
      rel="icon"
      href="https://cdn-icons-png.flaticon.com/512/2162/2162415.png"
    />
    <!-- Font Awesome -->
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
      rel="stylesheet"
    />
    <!-- Google Fonts poppins -->
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <!-- MDB -->
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/5.0.0/mdb.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"
    />
  </head>
  <style type="text/css">
    /* poppins font */
    body {
      font-family: "Poppins", sans-serif;
      color: #fff;
    }
    body {
      animation: animate 1s;
    }
    @keyframes animate {
      0% {
        opacity: 0;
      }
      100% {
        opacity: 1;
      }
    }
    h1 {
      font-size: 8rem !important;
    }
    h2 {
      font-size: 5rem !important;
    }

    .light {
      position: absolute;
      width: 0px;
      opacity: 0.75;
      background-color: white;
      box-shadow: #e9f1f1 0px 0px 20px 2px;
      opacity: 0;
      top: 100vh;
      bottom: 0px;
      left: 0px;
      right: 0px;
      margin: auto;
    }

    .x1 {
      -webkit-animation: floatUp 4s infinite linear;
      -moz-animation: floatUp 4s infinite linear;
      -o-animation: floatUp 4s infinite linear;
      animation: floatUp 4s infinite linear;
      -webkit-transform: scale(1);
      -moz-transform: scale(1);
      -o-transform: scale(1);
      transform: scale(1);
    }

    .x2 {
      -webkit-animation: floatUp 7s infinite linear;
      -moz-animation: floatUp 7s infinite linear;
      -o-animation: floatUp 7s infinite linear;
      animation: floatUp 7s infinite linear;
      -webkit-transform: scale(1.6);
      -moz-transform: scale(1.6);
      -o-transform: scale(1.6);
      transform: scale(1.6);
      left: 15%;
    }

    .x3 {
      -webkit-animation: floatUp 2.5s infinite linear;
      -moz-animation: floatUp 2.5s infinite linear;
      -o-animation: floatUp 2.5s infinite linear;
      animation: floatUp 2.5s infinite linear;
      -webkit-transform: scale(0.5);
      -moz-transform: scale(0.5);
      -o-transform: scale(0.5);
      transform: scale(0.5);
      left: -15%;
    }

    .x4 {
      -webkit-animation: floatUp 4.5s infinite linear;
      -moz-animation: floatUp 4.5s infinite linear;
      -o-animation: floatUp 4.5s infinite linear;
      animation: floatUp 4.5s infinite linear;
      -webkit-transform: scale(1.2);
      -moz-transform: scale(1.2);
      -o-transform: scale(1.2);
      transform: scale(1.2);
      left: -34%;
    }

    .x5 {
      -webkit-animation: floatUp 8s infinite linear;
      -moz-animation: floatUp 8s infinite linear;
      -o-animation: floatUp 8s infinite linear;
      animation: floatUp 8s infinite linear;
      -webkit-transform: scale(2.2);
      -moz-transform: scale(2.2);
      -o-transform: scale(2.2);
      transform: scale(2.2);
      left: -57%;
    }

    .x6 {
      -webkit-animation: floatUp 3s infinite linear;
      -moz-animation: floatUp 3s infinite linear;
      -o-animation: floatUp 3s infinite linear;
      animation: floatUp 3s infinite linear;
      -webkit-transform: scale(0.8);
      -moz-transform: scale(0.8);
      -o-transform: scale(0.8);
      transform: scale(0.8);
      left: -81%;
    }

    .x7 {
      -webkit-animation: floatUp 5.3s infinite linear;
      -moz-animation: floatUp 5.3s infinite linear;
      -o-animation: floatUp 5.3s infinite linear;
      animation: floatUp 5.3s infinite linear;
      -webkit-transform: scale(3.2);
      -moz-transform: scale(3.2);
      -o-transform: scale(3.2);
      transform: scale(3.2);
      left: 37%;
    }

    .x8 {
      -webkit-animation: floatUp 4.7s infinite linear;
      -moz-animation: floatUp 4.7s infinite linear;
      -o-animation: floatUp 4.7s infinite linear;
      animation: floatUp 4.7s infinite linear;
      -webkit-transform: scale(1.7);
      -moz-transform: scale(1.7);
      -o-transform: scale(1.7);
      transform: scale(1.7);
      left: 62%;
    }

    .x9 {
      -webkit-animation: floatUp 4.1s infinite linear;
      -moz-animation: floatUp 4.1s infinite linear;
      -o-animation: floatUp 4.1s infinite linear;
      animation: floatUp 4.1s infinite linear;
      -webkit-transform: scale(0.9);
      -moz-transform: scale(0.9);
      -o-transform: scale(0.9);
      transform: scale(0.9);
      left: 85%;
    }

    @-webkit-keyframes floatUp {
      0% {
        top: 100vh;
        opacity: 0;
      }
      25% {
        opacity: 1;
      }
      50% {
        top: 0vh;
        opacity: 0.8;
      }
      75% {
        opacity: 1;
      }
      100% {
        top: -100vh;
        opacity: 0;
      }
    }
    @-moz-keyframes floatUp {
      0% {
        top: 100vh;
        opacity: 0;
      }
      25% {
        opacity: 1;
      }
      50% {
        top: 0vh;
        opacity: 0.8;
      }
      75% {
        opacity: 1;
      }
      100% {
        top: -100vh;
        opacity: 0;
      }
    }
    @-o-keyframes floatUp {
      0% {
        top: 100vh;
        opacity: 0;
      }
      25% {
        opacity: 1;
      }
      50% {
        top: 0vh;
        opacity: 0.8;
      }
      75% {
        opacity: 1;
      }
      100% {
        top: -100vh;
        opacity: 0;
      }
    }
    @keyframes floatUp {
      0% {
        top: 100vh;
        opacity: 0;
      }
      25% {
        opacity: 1;
      }
      50% {
        top: 0vh;
        opacity: 0.8;
      }
      75% {
        opacity: 1;
      }
      100% {
        top: -100vh;
        opacity: 0;
      }
    }

    #head1,
    #head2,
    #head3,
    #head4,
    #head5 {
      opacity: 0;
    }

    #head1 {
      -webkit-animation: fadeOut 1 5s ease-in;
      -moz-animation: fadeOut 1 5s ease-in;
      -o-animation: fadeOut 1 5s ease-in;
      animation: fadeOut 1 5s ease-in;
    }

    #head2 {
      -webkit-animation: fadeOut 1 5s ease-in;
      -moz-animation: fadeOut 1 5s ease-in;
      -o-animation: fadeOut 1 5s ease-in;
      animation: fadeOut 1 5s ease-in;
      -webkit-animation-delay: 6s;
      -moz-animation-delay: 6s;
      -o-animation-delay: 6s;
      animation-delay: 6s;
    }

    #head3 {
      -webkit-animation: fadeOut 1 5s ease-in;
      -moz-animation: fadeOut 1 5s ease-in;
      -o-animation: fadeOut 1 5s ease-in;
      animation: fadeOut 1 5s ease-in;
      -webkit-animation-delay: 12s;
      -moz-animation-delay: 12s;
      -o-animation-delay: 12s;
      animation-delay: 12s;
    }

    #head4 {
      -webkit-animation: fadeOut 1 5s ease-in;
      -moz-animation: fadeOut 1 5s ease-in;
      -o-animation: fadeOut 1 5s ease-in;
      animation: fadeOut 1 5s ease-in;
      -webkit-animation-delay: 17s;
      -moz-animation-delay: 17s;
      -o-animation-delay: 17s;
      animation-delay: 17s;
    }

    #head5 {
      -webkit-animation: finalFade 1 5s ease-in;
      -moz-animation: finalFade 1 5s ease-in;
      -o-animation: finalFade 1 5s ease-in;
      animation: finalFade 1 5s ease-in;
      -webkit-animation-fill-mode: forwards;
      -moz-animation-fill-mode: forwards;
      -o-animation-fill-mode: forwards;
      animation-fill-mode: forwards;
      -webkit-animation-delay: 22s;
      -moz-animation-delay: 22s;
      -o-animation-delay: 22s;
      animation-delay: 22s;
    }

    @-webkit-keyframes fadeIn {
      from {
        opacity: 0;
      }
      to {
        opacity: 1;
      }
    }

    @-moz-keyframes fadeIn {
      from {
        opacity: 0;
      }
      to {
        opacity: 1;
      }
    }

    @-o-keyframes fadeIn {
      from {
        opacity: 0;
      }
      to {
        opacity: 1;
      }
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
      }
      to {
        opacity: 1;
      }
    }

    @-webkit-keyframes fadeOut {
      0% {
        opacity: 0;
      }
      30% {
        opacity: 1;
      }
      80% {
        opacity: 0.9;
      }
      100% {
        opacity: 0;
      }
    }

    @-moz-keyframes fadeOut {
      0% {
        opacity: 0;
      }
      30% {
        opacity: 1;
      }
      80% {
        opacity: 0.9;
      }
      100% {
        opacity: 0;
      }
    }

    @-o-keyframes fadeOut {
      0% {
        opacity: 0;
      }
      30% {
        opacity: 1;
      }
      80% {
        opacity: 0.9;
      }
      100% {
        opacity: 0;
      }
    }

    @keyframes fadeOut {
      0% {
        opacity: 0;
      }
      30% {
        opacity: 1;
      }
      80% {
        opacity: 0.9;
      }
      100% {
        opacity: 0;
      }
    }

    @-webkit-keyframes finalFade {
      0% {
        opacity: 0;
      }
      30% {
        opacity: 1;
      }
      80% {
        opacity: 0.9;
      }
      100% {
        opacity: 1;
      }
    }

    @-moz-keyframes finalFade {
      0% {
        opacity: 0;
      }
      30% {
        opacity: 1;
      }
      80% {
        opacity: 0.9;
      }
      100% {
        opacity: 1;
      }
    }

    @-o-keyframes finalFade {
      0% {
        opacity: 0;
      }
      30% {
        opacity: 1;
      }
      80% {
        opacity: 0.9;
      }
      100% {
        opacity: 1;
      }
    }

    @keyframes finalFade {
      0% {
        opacity: 0;
      }
      30% {
        opacity: 1;
      }
      80% {
        opacity: 0.9;
      }
      100% {
        opacity: 1;
      }
    }

    .loader {
      position: relative;
      width: 16rem;
      height: 16rem;
      background: linear-gradient(
        102.2deg,
        rgb(250, 45, 66) 9.6%,
        rgb(245, 104, 104) 96.1%
      );
      transform: rotateX(65deg) rotate(45deg);
      color: #000;
      animation: layers1 1s linear infinite alternate;
    }
    .loader:after {
      content: "";
      position: absolute;
      inset: 0;
      background: linear-gradient(to right, rgb(5, 117, 230), rgb(2, 27, 121));
      animation: layerTr 1s linear infinite alternate;
    }

    @keyframes layers1 {
      0% {
        box-shadow: 0px 0px 0 0px;
      }
      90%,
      100% {
        box-shadow: 20px 20px 0 -4px;
      }
    }
    @keyframes layerTr {
      0% {
        transform: translate(0, 0) scale(1);
      }
      100% {
        transform: translate(-25px, -25px) scale(1);
      }
    }
  </style>
  <body onload="wait()">
    <div
      class="d-flex justify-content-center align-items-center vh-100"
      id="loader"
    >
      <span class="loader"></span>
    </div>
    <main>
      <div class="d-none" id="content">
        <div class="light x1"></div>
        <div class="light x2"></div>
        <div class="light x3"></div>
        <div class="light x4"></div>
        <div class="light x5"></div>
        <div class="light x6"></div>
        <div class="light x7"></div>
        <div class="light x8"></div>
        <div class="light x9"></div>
        <div class="text-center animate__animated animate__fadeIn">
          <h1 class="display-1 mb-3">Temperatura</h1>
          <h2 class="display-3 mb-3" id="grados"></h2>
          <i class="far fa-thumbs-up fa-4x" id="grados-icon"></i>
        </div>
      </div>
    </main>

    <!-- The core Firebase JS SDK is always required and must be listed first -->
    <script src="https://www.gstatic.com/firebasejs/7.14.4/firebase-app.js"></script>

    <!-- TODO: Add SDKs for Firebase products that you want to use
     https://firebase.google.com/docs/web/setup#available-libraries -->

    <script src="https://www.gstatic.com/firebasejs/7.14.4/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.14.4/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.14.4/firebase-database.js"></script>

    <!-- Don't change the format for any other products. -->
    <!-- etc. -->

    <script>
      // Your web app's Firebase configuration
      const firebaseConfig = {
        apiKey: "AIzaSyBESmlprLU-fqcwH1YnJahm2yJNG8IFJqk",
        authDomain: "fresado-4a5be.firebaseapp.com",
        databaseURL: "https://fresado-4a5be-default-rtdb.firebaseio.com",
        projectId: "fresado-4a5be",
        storageBucket: "fresado-4a5be.appspot.com",
        messagingSenderId: "984539520783",
        appId: "1:984539520783:web:41bcaa99dd82c5ae01a87a",
        measurementId: "G-B7TMNREBCY",
      };
      // Initialize Firebase
      firebase.initializeApp(firebaseConfig);
      const auth = firebase.auth();
      const fs = firebase.firestore();
      const db = firebase.database();
    </script>

    <script>
      const Grados = db.ref("temperatura");
      const grados = document.getElementById("grados");
      const gradosIcon = document.getElementById("grados-icon");

      var myVar;

      const showPage = () => {
        document.getElementById("loader").className = "d-none";
        document.getElementById("content").className =
          "d-flex justify-content-center align-items-center vh-100";
        showGrados();
      };

      const wait = () => {
        myVar = setTimeout(showPage, 2000);
      };

      let colors = {};

      for (let index = -60; index <= 800; index++) {
        colors[index] = [
          `rgb(
              ${(index > 50) & (index <= 800) ? 200 + index : 100 + index},
              ${(index > 10) & (index <= 50) ? 255 + index : 100 - index},
              ${(index >= -60) & (index <= 10) ? 255 : 100 - index})`,
          `rgb(${index}, ${index}, ${index})`,
        ];
      }

      console.log(colors);

      var xhr = new XMLHttpRequest();

      const sendRequest = (data) => {
        if (data >= 200) {
          xhr.open("POST", "http://127.0.0.1:5000/", true);
          xhr.send();
        }
      };

      const showGrados = () => {
        Grados.on("value", (snapshot) => {
          grados.innerHTML = "";
          let data = snapshot.val();
          grados.innerText += `${data} CÂ°`;
          (data >= -60) & (data <= 0)
            ? (gradosIcon.className = "fas fa-thermometer-empty fa-8x")
            : (data > 0) & (data <= 30)
            ? (gradosIcon.className = "fas fa-thermometer-half fa-8x")
            : (data > 30) & (data <= 60)
            ? (gradosIcon.className = "fas fa-temperature-high fa-8x")
            : (gradosIcon.className = "fas fa-exclamation-triangle fa-8x");

          sendRequest(data);

          document.body.style.background = `linear-gradient(102.2deg,
              ${colors[data][0]} 9.6%, ${colors[data][1]} 96.1%)`;
          document.body.className = "lmao";
        });
      };
    </script>
  </body>
</html>
